<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Карта выдана</title>
  <style>
    body{font-family:Arial,sans-serif;background:#f8f9fa;margin:0;padding:20px;text-align:center;background:linear-gradient(135deg,#f0f7ff,#d0e8ff)}
    .card-container{
      margin:40px auto;max-width:680px;padding:20px;
      background:linear-gradient(135deg,#f8f9fa,#e3f2fd);
      border-radius:30px;box-shadow:0 30px 80px rgba(0,0,0,0.4);
    }
    .card-wrapper{
      position:relative;width:100%;padding-bottom:63.5%;border-radius:20px;overflow:hidden;
      box-shadow:0 20px 50px rgba(0,0,0,0.5),inset 0 0 30px rgba(255,255,255,0.2);
    }
    canvas{position:absolute;top:0;left:0;width:100%;height:100%}
    .issued{
      position:absolute;bottom:20px;left:50%;transform:translateX(-50%);
      background:rgba(0,0,0,0.75);color:#0f0;padding:12px 35px;border-radius:50px;
      font-weight:bold;font-size:19px;letter-spacing:3px;
      box-shadow:0 5px 25px rgba(0,255,0,0.4);
    }
    .info{margin-top:30px;color:#003087;font-size:26px;font-weight:bold}
    .number{font-family:'Courier New',monospace;letter-spacing:5px;color:#000;font-size:24px}
  </style>
</head>
<body>
  <div class="card-container">
    <div class="card-wrapper">
      <canvas id="cardCanvas"></canvas>
      <div class="issued">КАРТА ВЫДАНА</div>
    </div>
    <div class="info">
      <div id="clientName"></div>
      <div class="number" id="clientNumber"></div>
    </div>
  </div>

  <script>
    const urlParams = new URLSearchParams(window.location.search);
    const name = urlParams.get('name');
    const number = urlParams.get('number');
    const design = urlParams.get('design') || 1;

    document.getElementById('clientName').textContent = name;
    document.getElementById('clientNumber').textContent = number;

    const canvas = document.getElementById('cardCanvas');
    const ctx = canvas.getContext('2d');
    const img = new Image();
    img.onload = function() {
      ctx.drawImage(img, 0, 0, canvas.width, canvas.height);
      ctx.fillStyle = "rgba(0,0,0,0.65)";
      ctx.fillRect(0, canvas.height - 150, canvas.width, 150);

      ctx.font = "bold 54px Arial";
      ctx.strokeStyle = "#000"; ctx.lineWidth = 9; ctx.fillStyle = "#fff"; ctx.textAlign = "left";
      ctx.strokeText(name, 70, canvas.height - 55);
      ctx.fillText(name, 70, canvas.height - 55);

      ctx.font = "bold 58px 'Courier New', monospace";
      ctx.textAlign = "center";
      ctx.strokeText(number, canvas.width/2, canvas.height - 15);
      ctx.fillText(number, canvas.width/2, canvas.height - 15);
    };
    img.src = `/cards/card${design}.png?t=${Date.now()}`;
  </script>
</body>
</html>